require 'rake/clean'

CLEAN.include( '*_init.c', '*_wrap.c')
#CLOBBER.include()

case RUBY_PLATFORM
when /darwin/
    glut_h = '/System/Library/Frameworks/GLUT.framework/Headers/glut.h'
else
    glut_h = '/usr/include/GL/glut.h'
end

task :default => [ 'glut_init.o', 'glut_wrap.o' ]

rule '.o' => '.c' do |t|
    cmd = "cc #{$INCLUDES} #{$CFLAGS} -c -o #{t.name} #{t.source}"
    puts "============== #{cmd}"
    sh cmd
end

file 'glut_init.c' => [ 'mkwrap.rb' ] do
  ruby "mkwrap.rb #{glut_h}"
end

file 'glut_wrap.c' => [ 'mkwrap.rb' ] do
  ruby "mkwrap.rb #{glut_h}"
end

# Local Variables: ***
# ruby-indent-level: 4 ***
# End: ***
